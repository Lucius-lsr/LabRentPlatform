# LabRentPlatform系统设计

## 设计逻辑

租借设备逻辑

- 未注册用户→注册设备→成为普通用户

- 普通用户→查看设备列表→搜索设备→查看设备信息→填写申请信息→申请租借设备
- 设备提供者→处理租借申请→同意申请→线下租借设备
- 普通用户→线下归还设备
- 设备提供者→确认归还

其他逻辑（普通用户部分）

- 用户1→发送消息→用户2→收取消息→回复消息
- 普通用户→申请成为设备提供者→管理员审核→同意申请

其他逻辑（设备提供者部分）

- 设备提供者→填写新设备信息→申请上架设备→管理员审核→同意上架申请→上架设备
- 设备提供者→修改设备信息

其他逻辑（管理员部分）

- 管理员→对系统中所有数据信息直接进行增删改查
- 管理员→查看系统日志、统计信息

## 数据库表设计

### User

描述：用户表

属性：`id`,`username`,`email`,`password`,`is_verified`,`is_provider`

- `is_verified`记录用户注册后是否通过邮箱验证
- `is_provider`记录用户是否为设备提供者

### EmailVerifyCode

描述：邮箱验证码

属性：`id`,`code`,`email`,`send_type`,`add_time`

- `send_type`标记验证码的用途（注册、忘记密码、修改密码）

### Equipment

描述：设备表

属性：`id`,`name`,`description`,`count`

外键：`provider`

- `provider`用于记录设备所有者

### BorrowApply

描述：用于记录用户租借设备的申请信息

属性：`id`,`count`,`end_time`,`reason`,`state`,`unread`

外键：`borrower`,`target_equipment`,`owner`

- `count`为租借的设备数量
- `end_time`为租借的结束时间
- `state`记录租借申请的状态（申请中、已租借、已拒绝、已归还）
- `unread`记录租借者是否已经阅读申请的状态变动通知
- `owner`为租借设备的所有者

### OnShelfApply

描述：用于记录用户上架新设备的申请信息

属性：`id`,`remarks`,`state`,`unread`

外键：`target_equipment`

- `remarks`为上架理由
- `state`记录租借申请的状态（申请中、已租借、已拒绝）

### UpgradeApply

描述：用于记录普通用户成为设备提供者的申请

属性：`id`,`lab_info`,`address`,`phone`,`state`,`unread`

外键：`applicant`

### Message

描述：用于记录用户之间的留言

属性：`id`,`is_read`

外键：`sender`,`receiver`,`content`

### UserLog

描述：用于记录用户日志

属性：`request_type`,`request_query`,`request_body`,`status`

外键：`user`

## 技术方案

- 基于`django.db`封装数据库表结构，使用`Sqlite3`作为数据库；
- 使用`Vue.js`搭建前端页面，使用`Element UI`组件库；
- 使用`Django`搭建后端API。